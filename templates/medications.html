{% extends 'base.html' %}
{% block title %}CompanionCare{% endblock %}

{% block content1 %}Medications 
{% if companion_name is defined %}
    for {{ companion_name }}
{% endif %}
{% endblock %}

{% block content2 %}

<!-- View dropdown menu to enable companion selection.  One button enables adding new companion if no companion listed.
-->

    {% macro checkbox_alert(name, value='') -%}
        <input type="checkbox" name="{{ name }}" value="{{ 
            value|e }}" size="{{ size }}">
    {%- endmacro %}

    <div class="row">
        <div class="col-sm-6 col-md-6 col-lg-6">
            <form action="/medications/{{ companion_id }}" method="POST">

                {% macro input(name, variable, type='text', value='', size=20) -%}
                     {{ name }} <input type="{{ type }}" name="{{ variable }}" value="{{
                        value|e }}" size="{{ size }}">
                {%- endmacro %}

                {% for variable, name in medication_attributes_dict.items() %}
                    {{ input(name, variable) }}</p>
                {% endfor %}

                <div>
                    <input type="submit" value="Add medication">
                </div>
            </form>
            <br>
        </div>
        <div class="col-sm-6 col-md-6 col-lg-6">
            {% if petmed_dict is defined %}
                <form action="/alerts/{{ companion_id }}" method="POST">

                    <table>
                        {% for petmed_obj, med_obj in petmed_dict.iteritems() %}
                            <tr>
                                <td>
                                {{ checkbox_alert("alerts", petmed_obj.id) }}
                                </td>
                                <td>
                                    Medication Name: {{ med_obj.name }} <br>
                                    Medication ID: {{ med_obj.id }} <br>
                                    General Description: {{ med_obj.uses }} <br>
                                    Frequency: Every {{ petmed_obj.frequency }} hours <br>
                                    Prescribing Veterinarian ID: {{ petmed_obj.petvet_id }} <br>
                                    <br>
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                    <div>
                        <input type="submit" value="Add alert">
                    </div>
                </form>
            {% endif %}
        </div>
    </div>
    <br>

{% endblock %}