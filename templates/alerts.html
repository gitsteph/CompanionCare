{% extends 'base.html' %}
{% block title %}MedAlert (for non-human companions){% endblock %}

{% block content1 %}Alerts 
    {% if companion_obj is defined %}
        for {{ companion_obj.name }}
    {% endif %}
{% endblock %}

{% block content2 %}
        {% macro input(name, variable, type='text', value='', size=20) -%}
             {{ name }} <input type="{{ type }}" name="{{ variable }}" value="{{ value|e }}" size="{{ size }}">
        {%- endmacro %}

        {% if petmed_med_dict.items() is defined %}
            <form action="/alerts/{{ companion_obj.id }}/add" method="POST">
                {% for petmed_obj, med_obj in petmed_med_dict.items() %}
                    PetMed ID: {{ petmed_obj.id }} <br>
                    PetMed Freq: {{ petmed_obj.frequency }} {{ petmed_obj.frequency_unit }} <br>
                    Current: {{ petmed_obj.current }} <br>
                    PetVet ID: {{ petmed_obj.petvet_id }} <br>
                    Med ID: {{ med_obj.id }} <br>
                    Med Name: {{ med_obj.name }} <br>
                    <br>
                        {{ input("First alert", "next_alert_datetime", "datetime-local") }}<br>
                        {{ input("Frequency", "alert_frequency", "text", petmed_obj.frequency) }}<br>
                        {{ input("Frequency Unit", "alert_frequency_unit", "text", petmed_obj.frequency_unit) }}<br>

                        <select multiple class="alert_type">
                            <option value="Email">Email</option>
                            <option value="SMS">Text(SMS)</option>
                            <option value="MMS">Text(MMS)</option>
                        </select><br>
                        {{ input("Email", "alert_email", "email", user_obj.email ) }}<br>
                        {{ input("Phone", "primary_alert_phone", "text") }}<br><br>
                        OPTIONS ENABLED:<br> <!-- This will be User # -->
                        <input type="checkbox" name="alert_options" value="Postpone">Postpone Alert by 1 hr<br>
                        <input type="checkbox" name="alert_options" value="Cancel">Cancel this alert<br>
                        <input type="checkbox" name="alert_options" value="Forward">Forward Alert to Secondary Contact<br>
                        {{ input("Secondary #", "secondary_alert_phone", "text") }}<br>
                        <input type="hidden" name="petmed_id" value="{{ petmed_obj.id }}">
                        <!-- if one is selected, jquery/ajax popup box specific to selected.-->
                    <input type="submit" value="Save alerts">
                </form>
            {% endfor %}
        {% endif %}

<!-- SEND TEST MESSAGE TO TEST IF IT WORKS -->

{% endblock %}